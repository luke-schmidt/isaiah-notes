% Isaiah Chiastic Overview Component - Approach 3: Nested Box Layout
% Creates nested boxes to show the layered chiastic structure

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{isaiahChiasticOverview3}[2025/09/05 Isaiah Chiastic Overview - Nested Boxes]

\RequirePackage{tikz}
\usetikzlibrary{shadows,fit}

% Chiastic overview command - Nested box layout
\newcommand{\isaiahChiasticOverview}[1]{%
    \par\vspace{15pt}%
    % Main title centered at top
    \begin{center}
        \textcolor{blue}{\bfseries\Huge Isaiah 1-12 Chiastic Overview}
    \end{center}
    \vspace{20pt}
    
    % Intro Section (Chapter 1) - Above the nested structure
    \noindent
    \begin{minipage}{\linewidth}
        \begin{center}
        \ifnum#1=1
            \begin{tikzpicture}
            \node[
                draw=black, line width=3pt, rounded corners=12pt, inner sep=12pt,
                fill=orange!20, drop shadow, text width=6cm,
                minimum height=2cm, anchor=center
            ] at (0,0) {
                \begin{center}
                \textbf{\Large Chapter 1}
                
                \textbf{Introduction to Isaiah}
                \end{center}
                \vspace{2pt}
                \centering\textit{Setting the stage for the prophecy}
            };
            \end{tikzpicture}
        \else
            \begin{tikzpicture}
            \node[
                draw=gray, line width=2pt, rounded corners=12pt, inner sep=12pt,
                fill=orange!5, drop shadow={opacity=0.3}, text width=6cm,
                minimum height=2cm, anchor=center
            ] at (0,0) {
                \begin{center}
                \textbf{\Large Chapter 1}
                
                \textbf{Introduction to Isaiah}
                \end{center}
                \vspace{2pt}
                \centering\textit{Setting the stage for the prophecy}
            };
            \end{tikzpicture}
        \fi
        \end{center}
    \end{minipage}
    
    \vspace{15pt}
    
    % Nested chiastic structure
    \begin{center}
    \begin{tikzpicture}
        
        % Outermost layer - A and A' (blue background)
        \coordinate (centerpoint) at (0,0);
        
        % A: Chapters 2-4 (left side)
        \ifnum#1=2
            \node[draw=black, line width=4pt, rounded corners=15pt, inner sep=15pt,
                  fill=blue!25, drop shadow, text width=3.5cm, minimum height=8cm,
                  anchor=east] (A) at (-5,0) {
                \begin{center}
                \textbf{\large A}\\
                \textbf{Ch. 2-4}
                \end{center}
                \vspace{10pt}
                \textbf{Glorious Mt. Zion}\\
                Judgment\\
                Righteous Branch
                \vfill
                \textit{Outer layer themes}
            };
        \else
            \node[draw=gray, line width=3pt, rounded corners=15pt, inner sep=15pt,
                  fill=blue!8, drop shadow={opacity=0.3}, text width=3.5cm, minimum height=8cm,
                  anchor=east] (A) at (-5,0) {
                \begin{center}
                \textbf{\large A}\\
                \textbf{Ch. 2-4}
                \end{center}
                \vspace{10pt}
                \textbf{Glorious Mt. Zion}\\
                Judgment\\
                Righteous Branch
                \vfill
                \textit{Outer layer themes}
            };
        \fi
        
        % A': Chapters 11-12 (right side)
        \ifnum#1=8
            \node[draw=black, line width=4pt, rounded corners=15pt, inner sep=15pt,
                  fill=blue!25, drop shadow, text width=3.5cm, minimum height=8cm,
                  anchor=west] (Aprime) at (5,0) {
                \begin{center}
                \textbf{\large A'}\\
                \textbf{Ch. 11-12}
                \end{center}
                \vspace{10pt}
                \textbf{Righteous Branch}\\
                brings\\
                \textbf{Glorious Mt. Zion}
                \vfill
                \textit{Completion of themes}
            };
        \else
            \node[draw=gray, line width=3pt, rounded corners=15pt, inner sep=15pt,
                  fill=blue!8, drop shadow={opacity=0.3}, text width=3.5cm, minimum height=8cm,
                  anchor=west] (Aprime) at (5,0) {
                \begin{center}
                \textbf{\large A'}\\
                \textbf{Ch. 11-12}
                \end{center}
                \vspace{10pt}
                \textbf{Righteous Branch}\\
                brings\\
                \textbf{Glorious Mt. Zion}
                \vfill
                \textit{Completion of themes}
            };
        \fi
        
        % Second layer - B and B' (green background)
        \ifnum#1=3
            \node[draw=black, line width=3pt, rounded corners=12pt, inner sep=12pt,
                  fill=green!25, drop shadow, text width=2.8cm, minimum height=6cm,
                  anchor=east] (B) at (-2.8,0) {
                \begin{center}
                \textbf{B}\\
                \textbf{5:1-25}
                \end{center}
                \vspace{8pt}
                \textbf{Vineyard Parable}\\
                Woes/Therefores\\
                \textit{Holy One of Israel}
                \vfill
                \textit{Judgment oracle}
            };
        \else
            \node[draw=gray, line width=2pt, rounded corners=12pt, inner sep=12pt,
                  fill=green!8, drop shadow={opacity=0.3}, text width=2.8cm, minimum height=6cm,
                  anchor=east] (B) at (-2.8,0) {
                \begin{center}
                \textbf{B}\\
                \textbf{5:1-25}
                \end{center}
                \vspace{8pt}
                \textbf{Vineyard Parable}\\
                Woes/Therefores\\
                \textit{Holy One of Israel}
                \vfill
                \textit{Judgment oracle}
            };
        \fi
        
        \ifnum#1=7
            \node[draw=black, line width=3pt, rounded corners=12pt, inner sep=12pt,
                  fill=green!25, drop shadow, text width=2.8cm, minimum height=6cm,
                  anchor=west] (Bprime) at (2.8,0) {
                \begin{center}
                \textbf{B'}\\
                \textbf{9:8-10:34}
                \end{center}
                \vspace{8pt}
                \textbf{Woes/Therefores}\\
                of Judgment\\
                \textit{Holy One of Israel}
                \vfill
                \textit{Extended oracle}
            };
        \else
            \node[draw=gray, line width=2pt, rounded corners=12pt, inner sep=12pt,
                  fill=green!8, drop shadow={opacity=0.3}, text width=2.8cm, minimum height=6cm,
                  anchor=west] (Bprime) at (2.8,0) {
                \begin{center}
                \textbf{B'}\\
                \textbf{9:8-10:34}
                \end{center}
                \vspace{8pt}
                \textbf{Woes/Therefores}\\
                of Judgment\\
                \textit{Holy One of Israel}
                \vfill
                \textit{Extended oracle}
            };
        \fi
        
        % Third layer - C and C' (red background)
        \ifnum#1=4
            \node[draw=black, line width=3pt, rounded corners=10pt, inner sep=10pt,
                  fill=red!25, drop shadow, text width=2.2cm, minimum height=4cm,
                  anchor=east] (C) at (-1.1,0) {
                \begin{center}
                \textbf{C}\\
                \textbf{5:26-30}
                \end{center}
                \vspace{8pt}
                \textbf{Assyria}\\
                brings nothing\\
                but darkness
                \vfill
                \textit{Despair}
            };
        \else
            \node[draw=gray, line width=2pt, rounded corners=10pt, inner sep=10pt,
                  fill=red!8, drop shadow={opacity=0.3}, text width=2.2cm, minimum height=4cm,
                  anchor=east] (C) at (-1.1,0) {
                \begin{center}
                \textbf{C}\\
                \textbf{5:26-30}
                \end{center}
                \vspace{8pt}
                \textbf{Assyria}\\
                brings nothing\\
                but darkness
                \vfill
                \textit{Despair}
            };
        \fi
        
        \ifnum#1=6
            \node[draw=black, line width=3pt, rounded corners=10pt, inner sep=10pt,
                  fill=red!25, drop shadow, text width=2.2cm, minimum height=4cm,
                  anchor=west] (Cprime) at (1.1,0) {
                \begin{center}
                \textbf{C'}\\
                \textbf{9:1-7}
                \end{center}
                \vspace{8pt}
                \textbf{Darkness broken}\\
                by Promised Child
                \vfill
                \textit{Hope emerges}
            };
        \else
            \node[draw=gray, line width=2pt, rounded corners=10pt, inner sep=10pt,
                  fill=red!8, drop shadow={opacity=0.3}, text width=2.2cm, minimum height=4cm,
                  anchor=west] (Cprime) at (1.1,0) {
                \begin{center}
                \textbf{C'}\\
                \textbf{9:1-7}
                \end{center}
                \vspace{8pt}
                \textbf{Darkness broken}\\
                by Promised Child
                \vfill
                \textit{Hope emerges}
            };
        \fi
        
        % Center - innermost layer (yellow background)
        \ifnum#1=5
            \node[draw=black, line width=4pt, rounded corners=12pt, inner sep=12pt,
                  fill=yellow!35, drop shadow, text width=2.5cm, minimum height=3cm,
                  anchor=center] (center) at (0,0) {
                \begin{center}
                \textbf{\large CENTER}\\
                \textbf{Ch. 6-8}
                \end{center}
                \vspace{8pt}
                \textbf{Narrative}\\
                \textbf{Middle}
                \vspace{4pt}
                
                Views of King \& promised children
                \vfill
                \textit{Heart of chiasm}
            };
        \else
            \node[draw=gray, line width=3pt, rounded corners=12pt, inner sep=12pt,
                  fill=yellow!10, drop shadow={opacity=0.3}, text width=2.5cm, minimum height=3cm,
                  anchor=center] (center) at (0,0) {
                \begin{center}
                \textbf{\large CENTER}\\
                \textbf{Ch. 6-8}
                \end{center}
                \vspace{8pt}
                \textbf{Narrative}\\
                \textbf{Middle}
                \vspace{4pt}
                
                Views of King \& promised children
                \vfill
                \textit{Heart of chiasm}
            };
        \fi
        
    \end{tikzpicture}
    \end{center}
    
    \par\vspace{15pt}%
}

\endinput